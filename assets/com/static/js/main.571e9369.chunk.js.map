{"version":3,"sources":["ui/CanvasDrawer.js","utils/FloodFill.js","ui/MouseBrush.js","utils/FakeResponse.js","ui/CameraBox.js","ui/ToolboxButton.js","ui/ToolboxGroup.js","ui/Toolbox.js","ui/TempInfo.js","ui/CameraContainer.js","App.js","serviceWorker.js","index.js","images/brush_0.svg","images/test_left.png","images/mouse_0.svg","images/brush_1.svg","images/brush_2.svg","images/brush_3.svg","images/brush_4.svg","images/brush_5.svg","images/info_icon.svg","images/mouse_1.svg","images/mouse_2.svg","images/mouse_3.svg","images/mouse_4.svg","images/mouse_5.svg","images/tool_polygon.svg","images/tool_bucket.svg","images/tool_brush.svg","images/view_split.svg","logo.svg"],"names":["CanvasDrawer","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","drawStroke","canvas","ctx","color","thickness","renderMode","borderCtx","globalCompositeOperation","clearRect","width","height","dArr","s","i","length","drawImage","fillStyle","fillRect","borderCanvas","console","log","drawPaint","shadowCtx","paintList","profile","shadowPaintList","slice","forEach","toDraw","pos","size","shadowShape","src","erase","x","y","toConsumableArray","addPaint","poly","state","_drawnImage","_closedShape","background","Image","shadowCanvas","document","createElement","setAttribute","getContext","shadowSize","shape","floodCanvas","floodCtx","tempCanvas","tempCtx","polyCanvas","polyCtx","paintCanvas","paintCtx","imageCanvas","imageCtx","bufferPaintList","bufferTool","bufferRenderMode","readyToFlood","hasFlood","beginPath","rect","fill","closedShape","drawLines","_this2","strokeStyle","drawTint","moveTo","p","lineTo","closePath","restore","arc","radius","Math","PI","globalAlpha","lineWidth","stroke","role","feed","frozen","tool","flooding","floodData","floodOrig","a","b","_this$props","refs","flood","onload","scale","testLeft","letBeDrawn","drawPolygons","tolerance","sqrt","pow","fillcolor","targetCtx","pixelCompare","targetcolor","targettotal","data","r","g","abs","pixelCompareAndSet","me","mw","img","getImageData","Q","e","w","w2","push","pop","parseInt","j","putImageData","floodfill","FloodFill","_this$props2","drawCanvas","react_default","style","position","opacity","mixBlendMode","ref","React","Component","withStyles","objectSpread","MouseBrush","componentDidMount","_isMounted","componentWillUnmount","classes","hidden","className","brushImage","visibility","id","pointerEvents","fakeResponse","version","creator","name","pages","entries","startedDateTime","time","request","method","url","httpVersion","headers","value","queryString","cookies","headersSize","bodySize","response","status","statusText","content","mimeType","text","encoding","redirectURL","_transferSize","cache","timings","blocked","dns","ssl","connect","send","wait","receive","_blocked_queueing","serverIPAddress","connection","maxWheelZoom","brushSizeOrigin","getBoxTransform","naturalWidth","concat","CameraBox","isConnected","frame","mouseDrag","uniqueKey","round","random","zoomCenter","zoomDistance","zooming","moving","painting","moveShift","showMask","mouseBrush","blockContextMenu","disabledEvent","stopPropagation","window","event","cancelBubble","preventDefault","mouseWheel","mousePos","zoomOffset","zoom","actPos","shift","zoomDist","deltaY","tempZoom","setState","handleOnNewAnnotatedframe","registerMouseBrush","mouseTarget","listenersAreReady","mouseCenter","mouseGlobalPos","zoomShift","baseZoom","prevPos","prevShift","mouseGlobalPrev","isMouseOver","brushSize","_isBrushVisible","brushBuffer","brushScaleBuffer","_mounted","tick","addEventListener","mouseAction","type","activePoly","view","boxClicked","count","offsetX","offsetY","mouseGlobalCenter","pageX","pageY","mod","space","ctrl","which","toPaint","brushData","shouldDrag","closedShapeCallback","key","_this3","result","curr","forceRender","brushScale","new_poly","getElementById","hideMouse","requestAnimationFrame","bind","_this4","active","origin","zIndex","animated","_this$state","initConnection","addMouseListeners","offset","resolvePosition","canvas_container","transform","transformOrigin","overflow","ui_CanvasDrawer","ui_MouseBrush","mouse","transitionProperty","transitionDuration","transitionTimingFunction","tempButton","ToolboxButton","callback","map","triggered","toolboxButton","notrigger","onClick","click","toolboxImage","cursor","&:hover","filter","padding","ToolboxGroup","trigger","side","buttons","ui_ToolboxButton","toolboxGroup","boxSizing","borderWidth","borderRadius","borderStyle","borderRight","borderColor","marginBottom","Toolbox","groups","ui_ToolboxGroup","side_css","toolbox","right","left","top","TempInfo","onMouseOver","openDialog","onMouseOut","tempInfo","tempDetails","display","bold","tempIcon","infoIcon","fontColor","bottom","paddingBottom","userSelect","paddingTop","fontWeight","brushToolboxMap","brush_0","brush_1","brush_2","brush_3","brush_4","brush_5","funcToolboxMap","tool_polygon","tool_bucket","tool_brush","view_split","prevScreenSize","brushSizeEdge","splittedPos","profiles","closedShapeCounter","CameraContainer","getPositions","screenSize","edge","landscape","heightRatio","widthRatio","bounds","isToolboxHidden","brushSelect","mouse_0","mouse_1","mouse_2","mouse_3","mouse_4","mouse_5","actBrush","funcSelect","actToolNum","alt","keyPress","keyUp","assign","newScale","act","profilesCombinationId","brushMap","newBrush","ui_Toolbox","funcMap","newFunc","cameraContainer","ui_CameraBox","ui_TempInfo","defaultProps","App","resizer","resizeHelper","assertThisInitialized","removeEventListener","innerWidth","innerHeight","ui_CameraContainer","Boolean","location","hostname","match","ReactDOM","render","src_App_0","navigator","serviceWorker","ready","then","registration","unregister","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.571e9369.chunk.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { FloodFill } from '../utils/FloodFill';\nimport testLeft from '../images/test_left.png';\n\nexport const imagePrefix = 'data:image/*;base64,';\n\nconst secondary_color = '#FFFFFF';\n\n\nconst twoPointsDistance = (a,b) => Math.sqrt(Math.pow((a.x-b.x),2)+Math.pow((a.y-b.y),2));\n\nconst b64 = (b) => {\n  let t = '';\n  const n = new Uint8Array(b);\n  const r = n.byteLength;\n  for (let i = 0; i < r; i++) {\n    t += String.fromCharCode(n[i]);\n  }\n  return window.btoa(t);\n};\n\nconst styles = {\n};\nlet _blockedRightClick = false;\n\nclass CanvasDrawer extends React.Component {\n  static propTypes = {\n    role: PropTypes.string.isRequired,\n    profile: PropTypes.object.isRequired,\n    feed: PropTypes.object.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n    this.poly = [];\n    this.state = {\n\n    };\n    this._drawnImage = false;\n    this._closedShape = false;\n\n    this.ctx = null;\n\n    this.background = new Image();\n    this.shadowPaintList = [];\n    this.shadowCanvas = document.createElement('canvas');\n    this.shadowCanvas.setAttribute('width', props.profile.width);\n    this.shadowCanvas.setAttribute('height', props.profile.height);\n    this.shadowCtx = this.shadowCanvas.getContext('2d');\n    this.shadowSize = { width:props.profile.width, height:props.profile.height };\n    this.shadowShape = new Image();\n    this.shadowShape.src = props.shape;\n\n    this.borderCanvas = document.createElement('canvas');\n    this.borderCanvas.setAttribute('width', props.profile.width);\n    this.borderCanvas.setAttribute('height', props.profile.height);\n    this.borderCtx = this.borderCanvas.getContext('2d');\n\n    this.floodCanvas = document.createElement('canvas');\n    this.floodCanvas.setAttribute('width', props.profile.width);\n    this.floodCanvas.setAttribute('height', props.profile.height);\n    this.floodCtx = this.floodCanvas.getContext('2d');\n\n    this.tempCanvas = document.createElement('canvas');\n    this.tempCanvas.setAttribute('width', props.profile.width);\n    this.tempCanvas.setAttribute('height', props.profile.height);\n    this.tempCtx = this.tempCanvas.getContext('2d');\n\n    this.polyCanvas = document.createElement('canvas');\n    this.polyCanvas.setAttribute('width', props.profile.width);\n    this.polyCanvas.setAttribute('height', props.profile.height);\n    this.polyCtx = this.polyCanvas.getContext('2d');\n\n    this.paintCanvas = document.createElement('canvas');\n    this.paintCanvas.setAttribute('width', props.profile.width);\n    this.paintCanvas.setAttribute('height', props.profile.height);\n    this.paintCtx = this.paintCanvas.getContext('2d');\n\n    this.imageCanvas = document.createElement('canvas');\n    this.imageCanvas.setAttribute('width', props.profile.width);\n    this.imageCanvas.setAttribute('height', props.profile.height);\n    this.imageCtx = this.imageCanvas.getContext('2d');\n    this.bufferPaintList = [];\n    this.bufferTool = 'none';\n    this.bufferRenderMode = 'none';\n    this.readyToFlood = false;\n    this.hasFlood = false;\n  }\n  drawStroke = (canvas, ctx, color, thickness, renderMode) => {\n    this.borderCtx.globalCompositeOperation ='source-over';\n    this.borderCtx.clearRect(0, 0, canvas.width, canvas.height);\n\n    let dArr = [-1,-1, 0,-1, 1,-1, -1,0, 1,0, -1,1, 0,1, 1,1], // offset array\n      s = thickness,  // thickness scale\n      x = 5,  // final position\n      y = 5;\n  \n    // draw images at offsets from the array scaled by s\n    for(let i = 0; i < dArr.length; i += 2)\n        this.borderCtx.drawImage(canvas, x + dArr[i]*s, y + dArr[i+1]*s);\n    \n    // fill with color\n    this.borderCtx.globalCompositeOperation = 'source-in';\n    this.borderCtx.fillStyle = color;\n    this.borderCtx.fillRect(0,0, this.borderCanvas.width, this.borderCanvas.height);\n    \n    // draw original image in normal mode\n    this.borderCtx.globalCompositeOperation = renderMode === 'outline' ? 'destination-out' : 'source-over';\n    this.borderCtx.drawImage(canvas, x, y);\n    if(renderMode === 'outline'){\n        console.log('outline');\n        ctx.fillStyle = '#FFFFFF';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n    }\n    ctx.drawImage(this.borderCanvas, -x, -y);\n    \n  } \n  drawTint(ctx, color, width, height){  \n    ctx.globalCompositeOperation = 'source-over';\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.rect(0, 0, width, height);\n    ctx.fill();\n  }\n  drawPaint = (ctx, shadowCtx, paintList, profile) => {\n        if(paintList.length > this.shadowPaintList.length){\n            let diff = paintList.slice(this.shadowPaintList.length);\n            diff.forEach((toDraw, i) => {\n                const {pos, size} = toDraw;\n                this.shadowShape.src = toDraw.src;\n                ctx.globalCompositeOperation = toDraw.erase ? 'destination-out' : 'source-over';\n                ctx.drawImage(this.shadowShape, pos.x-size.width/2, pos.y-size.height/2, size.width, size.height);\n                console.log('DRAWN ');\n            });\n            this.shadowPaintList = [...paintList];\n        }\n  }\n  addPaint = () => {\n\n  }\n  changeBrushSource(src){\n    this.shadowShape.src = src;\n  }\n  drawPolygons(ctx, poly, color, width, height, closedShape, renderMode, drawLines){\n    ctx.clearRect(0, 0, width, height);\n    ctx.fillStyle = color;\n    ctx.strokeStyle = color;\n    if(closedShape){\n        this.drawTint(ctx, color, width, height);\n        //\n        ctx.fillStyle = color;\n        ctx.globalCompositeOperation = 'destination-out';\n        ctx.beginPath();\n        ctx.moveTo(poly[0].x,poly[0].y);\n        poly.forEach((p,i) => {\n            if(i+1 !== poly.length){\n                ctx.lineTo(poly[i+1].x,poly[i+1].y);\n            }\n        });\n        ctx.lineTo(poly[0].x,poly[0].y);\n        ctx.fill();\n        ctx.closePath();\n        ctx.globalCompositeOperation = 'source-over';\n\n    }\n    if(drawLines){\n        ctx.fillStyle = closedShape ? secondary_color : color;\n        ctx.strokeStyle = closedShape ? '#FFFFFF00' : color;\n\n        poly.forEach((p,i) => {\n            ctx.restore();\n            ctx.beginPath();\n            ctx.arc(p.x, p.y, this.props.radius, 0, 2*Math.PI);\n            ctx.globalAlpha = 1;\n            ctx.fill();\n            if(i+1 !== poly.length){\n                ctx.lineWidth = 2;\n                ctx.moveTo(poly[i].x,poly[i].y);\n                ctx.lineTo(poly[i+1].x,poly[i+1].y);\n                ctx.stroke();\n            }\n        });\n    }\n  }\n  drawCanvas(role, profile, feed, frozen, closedShape, paintList, renderMode, tool, flooding, floodData, floodOrig){\n    const {\n        poly, color,\n    } = this.props;\n    const canvas = this.refs.canvas\n    const canvas_flood = this.refs.flood\n    \n    if(canvas){\n        if(!this.ctx){\n            this.ctx = canvas.getContext('2d');\n        }\n        let ctx = this.ctx;\n        let imageCtx = this.imageCtx;\n        let imageCanvas = this.imageCanvas;\n        if(role === 'camera' && !frozen || !this._drawnImage){\n            let background = this.background;\n            background.onload = function () {\n                let scale = profile.width/feed.width;\n                let width = profile.width*scale;\n                let height = profile.height*scale;\n\n                imageCtx.drawImage(background, 0, 0, width, height);\n                ctx.drawImage(imageCanvas, 0, 0, width, height);\n                console.log('draw image');\n            }\n            background.src = testLeft;\n        }\n        if(role === 'polygon'){\n            if(!this.readyToFlood){\n                this.background.onload = function () {\n\n                }\n                this.background.src = testLeft;\n                this.readyToFlood = true;\n            }\n\n            let letBeDrawn = false;\n            \n            if((poly != this.poly) || this.bufferTool != tool){\n                this.poly = poly;\n                let drawLines = tool == 'polygon';\n                this.drawPolygons(this.polyCtx, this.poly, color, canvas.width, canvas.height, closedShape, renderMode, drawLines);\n                console.log('drawPolygons');\n               \n                if(!this._closedShape && closedShape){\n                    this._closedShape = true;\n                }\n                this.bufferTool = tool;\n                letBeDrawn = true;\n            }\n            \n            if(paintList && paintList.length != this.bufferPaintList.length){\n                // TODO: change to this.paintCtx\n                this.drawPaint(this.paintCtx, this.shadowCtx, paintList, profile);\n                this.bufferPaintList = [...paintList];\n\n                letBeDrawn = true;\n            }\n            \n            if(flooding){ // floodData\n                this.floodCtx.clearRect(0, 0, canvas.width, canvas.height);\n                this.tempCtx.clearRect(0, 0, canvas.width, canvas.height);\n                this.drawTint(this.floodCtx, color, canvas.width, canvas.height);\n                this.imageCtx.drawImage(this.background, 0, 0, canvas.width, canvas.height);\n                let tolerance = twoPointsDistance(floodOrig, floodData)/4;\n                FloodFill(floodOrig.x, floodOrig.y, {r:4,g:4,b:4,a:1}, this.imageCtx, this.tempCtx, canvas.width, canvas.height, tolerance);\n                this.hasFlood = true;\n                this.floodCtx.globalCompositeOperation = 'destination-out';\n                this.floodCtx.drawImage(this.tempCanvas, 0, 0, canvas.width, canvas.height);\n                this.floodCtx.globalCompositeOperation = 'source-over';\n\n                letBeDrawn = true;\n            }\n            if(this.bufferRenderMode != renderMode){\n                letBeDrawn = true;\n            }\n            if(letBeDrawn){\n                console.log('letBeDrawn');\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                if(closedShape || tool === 'polygon'){\n                    //console.log('mergePolygons');\n                    ctx.drawImage(this.polyCanvas, 0, 0, canvas.width, canvas.height);\n                }\n                if((tool === 'bucket' || tool === 'brush') && this.hasFlood){\n                    //console.log('mergeFlood');\n                    ctx.drawImage(this.floodCanvas, 0, 0, canvas.width, canvas.height);\n                }\n                if(tool === 'brush' || renderMode === 'raw'){\n                    //console.log('mergeBrush');\n                    ctx.drawImage(this.paintCanvas, 0, 0, canvas.width, canvas.height);\n                    if(renderMode !== 'raw'){\n                        this.drawStroke(canvas, ctx, '#FF0000', 0.4, renderMode);\n                    }\n                }\n                if(renderMode === 'outline'){\n                    ctx.clearRect(0, 0, canvas.width, canvas.height);\n                    ctx.drawImage(this.polyCanvas, 0, 0, canvas.width, canvas.height);\n                    ctx.drawImage(this.floodCanvas, 0, 0, canvas.width, canvas.height);\n                    ctx.drawImage(this.paintCanvas, 0, 0, canvas.width, canvas.height);\n                    this.drawStroke(canvas, ctx, '#FF0000', 0.4, renderMode);\n                }\n            }\n            this.bufferRenderMode = renderMode\n        }\n        this._drawnImage = true;\n    }\n  }\n  \n  render() {\n    const {\n        role, profile, feed, frozen, closedShape, paintList, renderMode, tool, flooding, floodData, floodOrig,\n    } = this.props;\n\n    this.drawCanvas(role, profile, feed, frozen, closedShape, paintList, renderMode, tool, flooding, floodData, floodOrig);\n    this.bufferTool = tool;\n    return (\n        <canvas \n            style = {{\n                background: renderMode === 'raw' ? '#FFFFFF' : 'transparent',\n                width:profile.width, \n                height:profile.height, \n                position:'absolute',\n                opacity: role === 'polygon' && renderMode !== 'raw' && renderMode !== 'outline' ? 0.8 : 1,\n                mixBlendMode: 'polygon' && renderMode === 'inverse' ? 'exclusion' : 'normal',\n            }}\n            width={profile.width}\n            height={profile.height}\n            ref='canvas'\n        />\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(CanvasDrawer);","export const FloodFill = (x,y,fillcolor,ctx,targetCtx,width,height,tolerance) => {\n\n    //MIT License\n    //Author: Max Irwin, 2011\n\n    //Floodfill functions\n    function floodfill(x,y,fillcolor,ctx,width,height,tolerance) {\n        var img = ctx.getImageData(0,0,width,height);\n        var data = img.data;\n        var length = data.length;\n        var Q = [];\n        var i = (x+y*width)*4;\n        var e = i, w = i, me, mw, w2 = width*4;\n        var targetcolor = [data[i],data[i+1],data[i+2],data[i+3]];\n        var targettotal = data[i]+data[i+1]+data[i+2]+data[i+3];\n\n        if(!pixelCompare(i,targetcolor,targettotal,fillcolor,data,length,tolerance)) { return false; }\n        Q.push(i);\n        while(Q.length) {\n            i = Q.pop();\n            if(pixelCompareAndSet(i,targetcolor,targettotal,fillcolor,data,length,tolerance)) {\n                e = i;\n                w = i;\n                mw = parseInt(i/w2)*w2; //left bound\n                me = mw+w2;\t//right bound\t\t\t\n                while(mw<(w-=4) && pixelCompareAndSet(w,targetcolor,targettotal,fillcolor,data,length,tolerance)); //go left until edge hit\n                while(me>(e+=4) && pixelCompareAndSet(e,targetcolor,targettotal,fillcolor,data,length,tolerance)); //go right until edge hit\n                for(var j=w;j<e;j+=4) {\n                    if(j-w2>=0 \t\t&& pixelCompare(j-w2,targetcolor,targettotal,fillcolor,data,length,tolerance)) Q.push(j-w2); //queue y-1\n                    if(j+w2<length\t&& pixelCompare(j+w2,targetcolor,targettotal,fillcolor,data,length,tolerance)) Q.push(j+w2); //queue y+1\n                } \t\t\t\n            }\n        }\n        targetCtx.clearRect(0,0,width,height);\n        targetCtx.putImageData(img,0,0);\n    }\n\n    function pixelCompare(i,targetcolor,targettotal,fillcolor,data,length,tolerance) {\t\n        if (i<0||i>=length) return false; //out of bounds\n        if (data[i+3]===0)  return true;  //surface is invisible\n        \n        if (\n            (targetcolor[3] === fillcolor.a) && \n            (targetcolor[0] === fillcolor.r) && \n            (targetcolor[1] === fillcolor.g) && \n            (targetcolor[2] === fillcolor.b)\n        ) return false; //target is same as fill\n        \n        if (\n            (targetcolor[3] === data[i+3]) &&\n            (targetcolor[0] === data[i]  ) && \n            (targetcolor[1] === data[i+1]) &&\n            (targetcolor[2] === data[i+2])\n        ) return true; //target matches surface \n        \n        if (\n            Math.abs(targetcolor[3] - data[i+3])<=(255-tolerance) &&\n            Math.abs(targetcolor[0] - data[i]  )<=tolerance && \n            Math.abs(targetcolor[1] - data[i+1])<=tolerance &&\n            Math.abs(targetcolor[2] - data[i+2])<=tolerance\n        ) return true; //target to surface within tolerance \n        \n        return false; //no match\n    }\n\n    function pixelCompareAndSet(i,targetcolor,targettotal,fillcolor,data,length,tolerance) {\n        if(pixelCompare(i,targetcolor,targettotal,fillcolor,data,length,tolerance)) {\n            //fill the color\n            data[i] \t = fillcolor.r;\n            data[i+1] = fillcolor.g;\n            data[i+2] = fillcolor.b;\n            data[i+3] = fillcolor.a;\n            return true;\n        }\n        return false;\n    }\n\n    floodfill(x,y,fillcolor,ctx,width,height,tolerance);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n    brushImage:{\n        position:'absolute',\n        pointerEvents: 'none',\n    }\n};\nconst times = [];\n\nclass MouseBrush extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n        MouseBrush:0,\n    };\n    this._isMounted = false;\n  }\n  componentDidMount = () => {\n    this._isMounted = true;\n  }\n  componentWillUnmount = () => {\n    this._isMounted = false;\n  }\n  \n  render() {\n    \n    const { classes, hidden } = this.props;\n    //console.log(\"show visibility hidden: \"+hidden)\n    return (\n       <img className= {classes.brushImage}\n       style = {{visibility: hidden ? 'hidden' : 'visible'}}\n       src = {this.props.src} \n       id = {this.props.id}\n       />\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(MouseBrush);","\nexport const fakeResponse = {\n    log: {\n      version: '1.2',\n      creator: {\n        name: 'WebInspector',\n        version: '537.36'\n      },\n      pages: [],\n      entries: [\n        {\n          startedDateTime: '2018-12-08T13:33:38.425Z',\n          time: 6.225352996337577,\n          request: {\n            method: 'GET',\n            url: 'http://127.0.0.1:5000/socket.io/?camera=TIS-41810580&EIO=3&transport=polling&t=MUE1WJw&sid=ac4cd61fa0304be8ac061ce8650ae0f1',\n            httpVersion: 'http/1.0',\n            headers: [\n              {\n                name: 'Accept',\n                value: '*/*'\n              },\n              {\n                name: 'Referer',\n                value: 'http://localhost:3000/'\n              },\n              {\n                name: 'Origin',\n                value: 'http://localhost:3000'\n              },\n              {\n                name: 'User-Agent',\n                value: 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36'\n              }\n            ],\n            queryString: [\n              {\n                name: 'camera',\n                value: 'TIS-41810580'\n              },\n              {\n                name: 'EIO',\n                value: '3'\n              },\n              {\n                name: 'transport',\n                value: 'polling'\n              },\n              {\n                name: 't',\n                value: 'MUE1WJw'\n              },\n              {\n                name: 'sid',\n                value: 'ac4cd61fa0304be8ac061ce8650ae0f1'\n              }\n            ],\n            cookies: [],\n            headersSize: -1,\n            bodySize: 0\n          },\n          response: {\n            status: 200,\n            statusText: 'OK',\n            httpVersion: 'http/1.0',\n            headers: [\n              {\n                name: 'Access-Control-Allow-Origin',\n                value: 'http://localhost:3000'\n              },\n              {\n                name: 'Date',\n                value: 'Sat, 08 Dec 2018 13:33:38 GMT'\n              },\n              {\n                name: 'Content-Encoding',\n                value: 'gzip'\n              },\n              {\n                name: 'Access-Control-Allow-Credentials',\n                value: 'true'\n              },\n              {\n                name: 'Server',\n                value: 'Werkzeug/0.14.1 Python/3.6.3'\n              },\n              {\n                name: 'Connection',\n                value: 'close'\n              },\n              {\n                name: 'Content-Type',\n                value: 'application/octet-stream'\n              }\n            ],\n            cookies: [],\n            content: {\n              size: 56597,\n              width:960,\n              height:820,\n              mimeType: 'application/octet-stream',\n              text: '',\n              encoding: 'base64'\n            },\n            redirectURL: '',\n            headersSize: -1,\n            bodySize: -1,\n            _transferSize: 54418\n          },\n          cache: {},\n          timings: {\n            blocked: 0.9733529999958118,\n            dns: 0.0030000000000000027,\n            ssl: -1,\n            connect: 0.1110000000000001,\n            send: 0.09999999999999987,\n            wait: 3.126000003897585,\n            receive: 1.91199999244418,\n            _blocked_queueing: 0.3529999958118424\n          },\n          serverIPAddress: '127.0.0.1',\n          connection: '357549'\n        },\n    ],\n    },\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CanvasDrawer from '../ui/CanvasDrawer';\nimport MouseBrush from '../ui/MouseBrush';\nimport { fakeResponse } from '../utils/FakeResponse';\n\n\nconst styles = {\n  canvas_container: {\n    transform: 'rotateZ(0.0001)',\n    position:'absolute',\n  },\n  animated: {\n    transitionProperty: 'transform',\n    transitionDuration: '0.4s',\n    transitionTimingFunction: 'ease-in-out',\n  },\n  tempButton: {\n    transform: 'matrix(1.5, 0, 0, 1.5, 0, 0)',\n    position:'absolute',\n    transformOrigin:'0 0',\n  },\n};\nconst maxWheelZoom = 270;\nconst maxZoom = 100;\nconst brushSizeOrigin = {width:100, height:100};\n\nconst getBoxTransform = (x, y, width, naturalWidth) => {\n    let scale = width/naturalWidth;\n    return `matrix(${scale}, 0, 0, ${scale}, ${x}, ${y})`;\n}\n\nclass CameraBox extends React.Component {\n  static propTypes = {\n    profile: PropTypes.object.isRequired,\n    key: PropTypes.string,\n    origin: PropTypes.object.isRequired,\n    actPos: PropTypes.object.isRequired\n  };\n  state = {\n    isConnected:false,\n    frame:null,\n    poly:[],\n    mouseDrag:-1, // any else integer will refer to the poly[mouseDrag]\n    radius: 6,\n    uniqueKey: Math.round(Math.random()*100000),\n    zoomCenter: {x:0, y:0},\n    zoomDistance: 0,\n    zooming:false,\n    moving:false,\n    painting:false,\n    moveShift: {x:0, y:0},\n    closedShape:false,\n    showMask:false,\n    mouseBrush:null,\n    paintList:[],\n    erase:false,\n    floodData: {},\n    floodOrig: {},\n    flooding:false,\n  }\n\n  \n\n  constructor(props) {\n    super(props);\n\n    this.mouseTarget = null;\n    this.listenersAreReady = false;\n    this.mousePos = {x:0, y:0};\n    this.mouseCenter = {x:0, y:0};\n    this.mouseGlobalPos = {x:0, y:0};\n    this.zoomShift = {x:0, y:0};\n    this.zoom = 1;\n    this.baseZoom = 1;\n    this.tempZoom = false;\n    this.zoomOffset = {x:0, y:0};\n    this.shift = {x:0, y:0};\n    this.actPos = {x:0, y:0};\n    this.prevPos = {x:0, y:0}; //?\n    this.prevShift = {x:0, y:0};\n    this.mouseGlobalPrev = {x:0, y:0};\n    this.zoomCenter =  {x:0, y:0};\n    this.isMouseOver = false;\n    this.mouseBrush = null;\n    this.brushSize = {width:brushSizeOrigin.width, height:brushSizeOrigin.height}\n    this._isBrushVisible = false;\n    this.brushBuffer = {x:0, y:0};\n    this.brushScaleBuffer = 0;\n  }\n  componentDidMount() {\n    this._mounted = true;\n    this.tick();\n  }\n  \n  componentWillUnmount() {\n    this._mounted = false;\n  }\n  addMouseListeners() {\n      console.log(this.mouseTarget);\n      this.mouseTarget.addEventListener(\"mousedown\", (e) => this.mouseAction(\"mousedown\", e));\n      document.addEventListener(\"mouseup\", (e) => this.mouseAction(\"mouseup\", e));\n      this.mouseTarget.addEventListener(\"mousemove\", (e) => this.mouseAction(\"mousemove\", e));\n      this.mouseTarget.addEventListener(\"click\", (e) => this.mouseAction(\"click\", e));\n      this.mouseTarget.addEventListener(\"dblclick\", (e) => this.mouseAction(\"dblclick\", e));\n      this.mouseTarget.addEventListener(\"mouseover\", (e) => this.mouseAction(\"mouseover\", e));\n      this.mouseTarget.addEventListener(\"mouseout\", (e) => this.mouseAction(\"mouseout\", e));\n      this.mouseTarget.addEventListener('contextmenu', this.blockContextMenu);\n      this.mouseTarget.addEventListener('mousewheel', (e) => this.mouseWheel(e));\n   \n      this.listenersAreReady = true;\n  }\n  blockContextMenu = (e) => {\n    this.disabledEvent(e);\n  }\n  disabledEvent = (e) => {\n    if (e.stopPropagation){\n      e.stopPropagation();\n    } else if (window.event){\n      window.event.cancelBubble = true;\n    }\n    e.preventDefault();\n    return false;\n  }\n  mouseWheel = (e) => {\n    \n    this.zoomCenter = {x:this.mousePos.x, y:this.mousePos.y};\n\n    this.zoomOffset = {\n      x: (this.zoomCenter.x - this.zoomCenter.x*this.zoom) - this.actPos.x+this.shift.x,\n      y: (this.zoomCenter.y - this.zoomCenter.y*this.zoom) - this.actPos.y+this.shift.y,\n    } \n\n    let zoomDist = this.state.zoomDistance+e.deltaY/10;\n    zoomDist = zoomDist > maxWheelZoom ? maxWheelZoom : zoomDist < 0 ? 0 : zoomDist;\n    this.tempZoom = true;\n    this.setState({zoomDistance:zoomDist, zoomCenter: this.zoomCenter});\n  }\n  mouseAction(type, e){\n    this.disabledEvent(e);\n    let activePoly;\n    // check right click\n    if(this.props.view == 'splitted'){\n      switch(type){\n        case \"click\":\n          this.props.boxClicked(this.props.count);\n          break;\n      }\n    }else{\n\n      this.mousePos = {x:e.offsetX, y:e.offsetY};\n\n      switch(type){\n        case \"mousedown\":\n            this.mouseCenter = {x:e.offsetX, y:e.offsetY};\n            this.mouseGlobalCenter = {x:e.pageX, y:e.pageY};\n            this.mouseGlobalPos = {x:e.pageX, y:e.pageY};\n            this.mouseGlobalPrev = {x:e.pageX, y:e.pageY};\n\n            if(this.props.mod.shift){\n              this.baseZoom = this.zoom;\n              this.zoomCenter = {x:e.offsetX, y:e.offsetY}\n              let a = this.actPos\n              this.zoomOffset = {\n                x: (this.zoomCenter.x - this.zoomCenter.x*this.zoom) - this.actPos.x+this.shift.x,\n                y: (this.zoomCenter.y - this.zoomCenter.y*this.zoom) - this.actPos.y+this.shift.y,\n              }\n              console.log((this.zoomCenter.x - this.zoomCenter.x*this.zoom)+' '+this.actPos.x);\n              this.setState({zooming:true, zoomCenter: {x:e.offsetX, y:e.offsetY}, zoomDistance:0});\n\n            } else if(this.props.mod.space){\n              \n              this.setState({moving:true});\n\n            } else if(this.props.mod.ctrl || e.which === 3){\n              \n              if(this.props.tool === 'brush'){\n                let toPaint = {\n                    src:this.props.brushData.fill,\n                    erase:true,\n                    pos:{x:e.offsetX, y:e.offsetY}, \n                    size:this.brushSize\n                };\n                this.setState({paintList:[...this.state.paintList, toPaint], painting:true, erase:true});\n              }\n            }else{\n              switch (this.props.tool){\n                  case 'brush':\n                    let toPaint = {\n                        src:this.props.brushData.fill,\n                        erase:false,\n                        pos:{x:e.offsetX, y:e.offsetY}, \n                        size:this.brushSize\n                    };\n                    this.setState({paintList:[...this.state.paintList, toPaint], painting:true, erase:false});\n                  break;\n                  case 'polygon':\n                    activePoly = this.shouldDrag({x:e.offsetX, y:e.offsetY});\n                    if(activePoly < 0){\n                      if(!this.state.closedShape){\n                        activePoly = this.state.poly.length;\n                        this.setState({mouseDrag:activePoly, poly:[...this.state.poly, {x:e.offsetX, y:e.offsetY}]});\n                      }\n                    }else{\n                      this.setState({mouseDrag:activePoly});\n                    }\n                  break;\n                  case 'bucket':\n                    \n                    this.setState({flooding:true, floodData:{x:e.offsetX, y:e.offsetY}, floodOrig:{x:e.offsetX, y:e.offsetY}});\n                  break;\n                    \n              }\n            }\n            break;\n        case \"mouseup\":\n            this.setState({mouseDrag:-1, zooming:false, moving:false, painting:false, erase:false, flooding:false});\n            break;\n        case \"mousemove\":\n            this.isMouseOver = true;\n            this.mousePos = {x:e.offsetX, y:e.offsetY};\n            this.mouseGlobalPos = {x:e.pageX, y:e.pageY};\n            if(this.props.tool === 'bucket' && this.state.flooding){\n              this.setState({floodData:{x:e.offsetX, y:e.offsetY}});\n            }\n            if(this.state.zooming){\n              let zoomDist = this.mouseGlobalPos.y - this.mouseGlobalCenter.y;\n              this.setState({zoomDistance:zoomDist});\n            }\n            if(this.state.moving){\n              this.shift = {x:this.shift.x+(this.mouseGlobalPos.x - this.mouseGlobalPrev.x), y:this.shift.y+(this.mouseGlobalPos.y - this.mouseGlobalPrev.y)};\n              this.mouseGlobalPrev = {x:this.mouseGlobalPos.x, y:this.mouseGlobalPos.y};\n              this.setState({moveShift:this.shift});\n            }\n            if(this.props.tool === 'brush' && this.state.painting){\n             \n              let toPaint = {\n                  src:this.props.brushData.fill,\n                  erase:this.state.erase,\n                  pos:{x:e.offsetX, y:e.offsetY}, \n                  size:this.brushSize\n              };\n              this.setState({paintList:[...this.state.paintList, toPaint]});\n            }\n            break;\n        case \"click\":\n            activePoly = this.shouldDrag({x:e.offsetX, y:e.offsetY});\n            if(activePoly === 0 && this.state.poly.length > 2 && e.offsetX === this.mouseCenter.x && e.offsetY === this.mouseCenter.y && !this.state.closedShape){\n              this.props.closedShapeCallback(this.props.count);\n              this.setState({closedShape:true});\n            }\n            break;\n        case \"dblclick\":\n            activePoly = this.shouldDrag({x:e.offsetX, y:e.offsetY});\n            if(activePoly > 0){\n              this.setState({mouseDrag:-1, poly:[...this.state.poly.slice(0,activePoly), ...this.state.poly.slice(activePoly+1)]});\n            }\n            break;\n        case \"keypress\":\n            console.log(e.key);\n            switch(e.key){\n                case \"dblclick\":\n                \n                break;\n            }\n            break;\n        case \"mouseover\":\n            \n          break;\n        case \"mouseout\":\n            this.isMouseOver = false;\n            this.setState({mouseDrag:-1, zooming:false, painting:false, erase:false, flooding:false});\n            break;\n      }\n    }\n  }\n  shouldDrag(pos){\n    let result = -1;\n    \n    this.state.poly.forEach((curr, i) => {\n        let r  = this.state.radius;\n        let dist_points = Math.sqrt((pos.x-curr.x)*(pos.x-curr.x) + (pos.y-curr.y)*(pos.y-curr.y)) < r;\n        if (dist_points) {\n          result = i;\n        }\n    });\n    return result;\n  }\n\n  tick(){\n    if(this._mounted){\n      let forceRender = false;\n      if(this.brushScaleBuffer != this.props.brushScale){\n        this.brushSize = {width:brushSizeOrigin.width*this.props.brushScale, height:brushSizeOrigin.height*this.props.brushScale};\n        this.brushScaleBuffer = this.props.brushScale;\n        forceRender = true;\n      }\n      if(this.state.mouseDrag >= 0){\n        let new_poly = [...this.state.poly];\n        new_poly[this.state.mouseDrag] = {x:this.mousePos.x, y:this.mousePos.y};\n        this.setState({poly:new_poly});\n      }\n      if(this.state.zooming){\n        //console.log('zooming');\n      }\n      if(!this.mouseBrush){\n        this.mouseBrush = document.getElementById('brush'+this.state.uniqueKey);\n      }\n      if(this.mouseBrush){\n        if(this.brushBuffer.x === this.mousePos.x && this.brushBuffer.y === this.mousePos.y && !forceRender){\n\n        }else{\n          if(this.isMouseOver && !this.props.hideMouse || forceRender){\n              this._isBrushVisible = true;\n              console.log(this._isBrushVisible);\n              this.mouseBrush.style = 'transform: matrix(1, 0, 0, 1, '+(this.mousePos.x - this.brushSize.width/2)+', '+(this.mousePos.y - this.brushSize.height/2)+'); width:'+this.brushSize.width+'px; height:'+this.brushSize.height+'px;';\n          }else{\n            if(this._isBrushVisible){\n              this.mouseBrush.style = 'transform: matrix(1, 0, 0, 1, '+(-this.brushSize.width)+', '+(-this.brushSize.height)+');';\n              this._isBrushVisible = false;\n            }\n          }\n          this.brushBuffer = {x:this.mousePos.x, y:this.mousePos.y};\n        }\n        \n      }\n\n      window.requestAnimationFrame(this.tick.bind(this));\n    }\n  }\n\n  initConnection() {\n    //this.socket = this.createSocket(this.props.profile.id);\n    this.handleOnNewAnnotatedframe(fakeResponse.log.entries[0].response.content);\n  }\n \n  handleOnNewAnnotatedframe = (frame) => {\n    if(!this.state.isConnected){\n      console.log('new frame');\n      console.log(frame);\n    }\n    this.setState({isConnected:true, frame:frame});\n  }\n \n  registerMouseBrush = (e) => {\n   /*  if(!this.mouseBrush && e){\n      this.mouseBrush = e;\n    } */\n  }\n  \n\n\n  render() {\n    const {\n      classes, count, active, profile, key, origin, actPos, zIndex, animated, renderMode, brushScale, brushData, hideMouse, tool\n    } = this.props;\n    const {\n      isConnected, frame, uniqueKey, zooming, zoomDistance, zoomCenter, moving, paintList, painting, flooding, floodData, floodOrig\n    } = this.state;\n    if(profile && !this.state.isConnected){\n      this.initConnection();\n    }\n\n    if(isConnected && this.mouseTarget && !this.listenersAreReady){\n        this.addMouseListeners();\n    }\n    \n    if(zooming || this.tempZoom){\n      this.tempZoom = false;\n      this.zoom = this.baseZoom+zoomDistance/300;\n      this.zoom = this.zoom < 1 ? 1 : this.zoom > maxZoom ? maxZoom : this.zoom\n    }\n\n    const resolvePosition = (shift, zoomCenter, zoom, offset, profile) => {\n      \n        let x = (shift.x + zoomCenter.x-(zoomCenter.x*zoom))-offset.x;\n        let y = (shift.y + zoomCenter.y-(zoomCenter.y*zoom))-offset.y;\n\n        if(x > 0){\n          x = 0;\n        }\n        if(y > 0){\n          y = 0;\n        }\n        if(x < profile.width - profile.width*zoom){\n          x = profile.width - profile.width*zoom;\n        }\n        if(y < profile.height - profile.height*zoom){\n          y = profile.height - profile.height*zoom;\n        } \n\n        return {x:x, y:y}\n    }\n    \n    this.actPos = resolvePosition(this.shift, this.zoomCenter, this.zoom, this.zoomOffset, profile);\n    \n    return (\n      <div className = { animated ? classes.animated : classes.canvas_container }\n      \n      style = {{\n        transform:getBoxTransform(actPos.x, actPos.y, actPos.width, profile.width),\n        transformOrigin:'0 0',\n        width: profile.width,\n        height: profile.height,\n        overflow:'hidden',\n        position:'absolute',\n        zIndex: zIndex,\n      }}>\n      { isConnected ? \n        <div className = { classes.canvas_container } ref = {e => this.mouseTarget = e}\n        style = {{\n          transform: 'matrix('+this.zoom+', 0, 0, '+this.zoom+', '+this.actPos.x+', '+this.actPos.y+')',\n          transformOrigin:'0 0',\n        }}\n        >\n          <CanvasDrawer \n              role=\"camera\" \n              profile={profile} \n              feed = {frame} \n              frozen={true} \n              key={\"CameraDrawerCam\"+uniqueKey}\n          />\n          <CanvasDrawer \n              role=\"polygon\" \n              profile={profile} \n              feed = {frame} \n              frozen={false} \n              poly = {this.state.poly} \n              radius= {this.state.radius}\n              closedShape= {this.state.closedShape}\n              color = '#ffc600'\n              key={\"CameraDrawerPoly\"+uniqueKey}\n              paintList = { paintList }\n              shape = { brushData.fill }\n              renderMode = { renderMode }\n              tool = { tool }\n              flooding = { flooding }\n              floodData = { floodData }\n              floodOrig = { floodOrig }\n              />\n              \n          <MouseBrush \n              x = { this.mousePos.x }\n              y = { this.mousePos.y }\n              src = {brushData.mouse} \n              key= { \"brush-head-\"+uniqueKey }\n              id = { \"brush\"+uniqueKey }\n              ref = {e => this.registerMouseBrush(e)}\n              hidden = { hideMouse }\n              /> \n        }\n        </div>\n      : <div></div>\n      }\n      </div>\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(CameraBox);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nconst styles = {\n    toolboxButton:{\n      width:'6em',\n      height:'6em',\n      //background: 'rgba(0,0,0,0.1);',\n      cursor: 'pointer',\n      '&:hover':{\n        background:'rgba(255,198,0,0.3)',\n      }\n    },\n    toolboxImage: {\n      filter: 'grayscale(100%) brightness(0.3)',\n      width:'64%',\n      height:'64%',\n      padding:'15% 15% 15% 20%',\n      \n    }\n};\nconst times = [];\n\nclass ToolboxButton extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n    };\n    this._isMounted = false;\n  }\n  \n  componentDidMount = () => {\n    this._isMounted = true;\n  }\n  componentWillUnmount = () => {\n    this._isMounted = false;\n  }\n  click(e){\n    this.props.callback(this.props.map.key)\n  }\n  render() {\n    const { classes, map, key, triggered} = this.props;\n    return (\n       <div className={classes.toolboxButton} \n       style = {{background: triggered && !map.notrigger ? 'rgba(255,198,0,1)' : 'transparent'}}\n       onClick={(e) => this.click(e)} \n       key ={ key }\n       >\n          <img className={classes.toolboxImage} src={ map.src } />\n       </div>\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(ToolboxButton);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ToolboxButton from '../ui/ToolboxButton';\nconst styles = {\n    toolboxGroup:{\n        boxSizing: 'border-box',\n        borderWidth: '0.1em 0 0.1em 0.1em',\n        borderRadius: '2em 0 0 2em',\n        borderStyle: 'solid',\n        borderRight: 'none',\n        borderColor: '#3c3c3c', //'#ffc600',\n        overflow: 'hidden',\n        height:'auto',\n        width:'auto',\n        marginBottom: '5.6em',\n    }\n};\nconst times = [];\n\nclass ToolboxGroup extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n    };\n    this._isMounted = false;\n  }\n  \n  componentDidMount = () => {\n    this._isMounted = true;\n  }\n  componentWillUnmount = () => {\n    this._isMounted = false;\n  }\n  render() {\n    const { classes, map, trigger, side} = this.props;\n    let buttons = map.buttons.map((curr, i) => \n        <ToolboxButton \n            map = { curr }\n            callback = { this.props.callback }\n            key = { curr.key }\n            triggered = { trigger == i }\n        />\n    );\n    return (\n       <div className={classes.toolboxGroup}\n          style = {{\n            transform: side === 'right' ? 'none' : 'matrix(-1, 0, 0, 1, 0, 0)',\n          }}\n       >\n           {[...buttons]}\n       </div>\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(ToolboxGroup);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport ToolboxGroup from '../ui/ToolboxGroup';\nconst styles = {\n    toolbox:{\n        position:'absolute',\n        top:'46%',\n        //transform: 'translateY(-50%)',\n\n        transitionProperty: 'transform',\n        transitionDuration: '0.4s',\n        transitionTimingFunction: 'ease-in-out',\n        zIndex:1,\n    },\n};\n\nclass Toolbox extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n    };\n    this._isMounted = false;\n  }\n  \n  componentDidMount = () => {\n    this._isMounted = true;\n  }\n  componentWillUnmount = () => {\n    this._isMounted = false;\n  }\n  render() {\n    const { classes, map, trigger, hidden, side} = this.props;\n    console.log(map.groups);\n\n    let groups = map.groups.map((curr, i) => \n        <ToolboxGroup \n            map = { curr }\n            callback = { map.callback }\n            key = { curr.key }\n            trigger = { trigger }\n            side = { side }\n        />\n    );\n    let side_css = side === 'right' ? '100%' : '-100%';\n\n    console.log(side)\n    console.log(side_css)\n    return (\n       <div className={classes.toolbox}\n            style = {{ \n              transform: hidden ? 'translate('+side_css+', -50%)' : 'translate(0%, -50%)',\n              right: side === 'right' ? '0' : 'auto',\n              left: side === 'left' ? '0' : 'auto',\n            }}\n       >\n        { [...groups]}\n       </div>\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(Toolbox);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\n\nimport infoIcon from '../images/info_icon.svg';\n\nconst styles = {\n    tempInfo:{\n        position: 'absolute',\n        left: 0,\n        fontColor: '#CCCCCC',\n        bottom: '1em',\n        width: 'auto',\n        height: 'auto',\n    },\n    tempDetails:{\n        position: 'absolute',\n        bottom:0,\n        left: 0,\n        fontColor: '#CCCCCC',\n        padding: '1em',\n        paddingBottom: '5.2em',\n        width: '20em',\n        height: 'auto',\n        userSelect: 'none',\n        background:'white',\n        zIndex:1,\n    },\n    tempIcon:{\n        position: 'absolute',\n        width: '2.6em',\n        height: '2.6em',\n        bottom: 0,\n        left: '1em',\n    },\n    bold: {\n        paddingTop: '1em',\n        fontWeight: 'bold',\n        paddingBottom: '0em',\n        marginBottom: '0.7em',\n    }\n};\n\nclass TempInfo extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n        openDialog:false,\n    };\n    this._isMounted = false;\n  }\n  \n  componentDidMount = () => {\n    this._isMounted = true;\n  }\n  componentWillUnmount = () => {\n    this._isMounted = false;\n  }\n  onMouseOver = () => {\n    this.setState({openDialog:true});\n  }\n  onMouseOut = () => {\n    this.setState({openDialog:false});\n  }\n  render() {\n    const { classes } = this.props;\n    return (\n       <div className={classes.tempInfo} onMouseOver={this.onMouseOver}  onMouseOut={this.onMouseOut}>\n           <div className={classes.tempDetails}\n                style = {{\n                    display: this.state.openDialog ? 'block' : 'none',\n                }}\n           >\n                <p className={classes.bold}>Modifyers</p>\n                <span className={classes.bold}> Shift + DragUpDown / Scroll: </span> Zoom<br/>\n                <span className={classes.bold}> Space + Drag: </span> Move<br/>\n                \n                <span className={classes.bold}> z: </span> Normal view<br/>\n                <span className={classes.bold}> x: </span> Inverse (like) view<br/>\n                <span className={classes.bold}> c: </span> RAW view<br/>\n                <span className={classes.bold}> v: </span> Outline view<br/>\n                <p className={classes.bold}>Polygon Tool</p>\n                <span className={classes.bold}> Click + Drag: </span>Draw and drag polygons until closed shape<br/>\n                <span className={classes.bold}> Double Click on Polygon: </span>Remove polygon<br/>\n                <p className={classes.bold}>Bucket Tool</p>\n                <span className={classes.bold}> Click + Drag: </span>Set tolerance for the clicked point<br/>\n                <p className={classes.bold}>Brush Tool</p>\n                <span className={classes.bold}> Click + Drag: </span>Draw with selected shape<br/>\n                <span className={classes.bold}> Ctrl + Click / Right Click: </span>Erase brush (doesn't effect flood fill and polygons)<br/>\n                <span className={classes.bold}> Up Arrow: </span>Increse brush size<br/>\n                <span className={classes.bold}> Down Arrow: </span>Decrese brush size<br/>\n           </div>\n           <img className={classes.tempIcon} src= { infoIcon } />\n       </div>\n    );\n  }\n}\n\n\nexport default withStyles({ ...styles })(TempInfo);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport CameraBox from '../ui/CameraBox';\nimport Toolbox from '../ui/Toolbox';\nimport TempInfo from './TempInfo';\n\nimport mouse_0 from '../images/mouse_0.svg';\nimport brush_0 from '../images/brush_0.svg';\nimport mouse_1 from '../images/mouse_1.svg';\nimport brush_1 from '../images/brush_1.svg';\nimport mouse_2 from '../images/mouse_2.svg';\nimport brush_2 from '../images/brush_2.svg';\nimport mouse_3 from '../images/mouse_3.svg';\nimport brush_3 from '../images/brush_3.svg';\nimport mouse_4 from '../images/mouse_4.svg';\nimport brush_4 from '../images/brush_4.svg';\nimport mouse_5 from '../images/mouse_5.svg';\nimport brush_5 from '../images/brush_5.svg';\n\nimport tool_polygon from '../images/tool_polygon.svg';\nimport tool_bucket from '../images/tool_bucket.svg';\nimport tool_brush from '../images/tool_brush.svg';\n\nimport view_split from '../images/view_split.svg';\n\n\nconst size = {\n  width: 960,\n  height: 820,\n};\n\nconst brushToolboxMap = [\n  {\n    callback: null,\n    side: 'right',\n    groups:[\n      {\n        key:'bushes',\n        buttons:[\n          {\n            src: brush_0,\n            key: 'brush_0',\n          },\n          {\n            src: brush_1,\n            key: 'brush_1',\n          },\n          {\n            src: brush_2,\n            key: 'brush_2',\n          },\n          {\n            src: brush_3,\n            key: 'brush_3',\n          },\n          {\n            src: brush_4,\n            key: 'brush_4',\n          },\n          {\n            src: brush_5,\n            key: 'brush_5',\n          },\n        ]\n      }\n    ]\n  }\n]\n\nconst funcToolboxMap = [\n  {\n    callback: null,\n    side: 'left',\n    groups:[\n      {\n        key:'tools',\n        buttons:[\n          {\n            src: tool_polygon,\n            key: 'polygon',\n          },\n          {\n            src: tool_bucket,\n            key: 'bucket',\n          },\n          {\n            src: tool_brush,\n            key: 'brush',\n          },\n        ]\n      },\n      {\n        key:'views',\n        buttons:[\n          {\n            notrigger: true,\n            src: view_split,\n            key: 'split',\n          },\n        ]\n      },\n    ]\n  },\n]\n\nlet animated = false;\nlet prevScreenSize = {width:2, height:2};\nconst checkAnimated = (act) => {\n    if(prevScreenSize != act){\n      animated = false;\n    }\n    prevScreenSize = act;\n}\nconst styles = {\n    cameraContainer:{\n      position:'absolute',\n      width:'100%',\n      height:'100%',\n    }\n}\nconst brushStep = 0.1;\nconst brushSizeEdge = {min:0.1, max:8};\n//positions as ratio\nconst splittedPos = [\n  {x:0, y:0},\n  {x:0.5, y:0},\n  {x:0, y:0.5},\n  {x:0.5, y:0.5},\n];\nconst profiles = [{width:size.width, height:size.height, id:0},{width:size.width, height:size.height, id:0},{width:size.width, height:size.height, id:0},{width:size.width, height:size.height, id:0}];\nconst closedShapeCounter = profiles.map(() => false);\nclass CameraContainer extends React.Component {\n  static propTypes = {\n    key: PropTypes.string,\n    profilesCombinationId: PropTypes.string,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      view:'splitted', // single\n      active:0,\n      renderMode:'normal',\n      brushScale:1,\n      brushData:{\n        fill: brush_0,\n        mouse: mouse_0,\n      },\n      actBrush:0,\n      actToolNum:0,\n      tool: 'polygon',\n      isToolboxHidden:true,\n      mod:{\n        ctrl:false,\n        shift:false,\n        alt:false,\n        space:false,\n      }\n    }\n  }\n  \n\n  componentDidMount() {\n    document.addEventListener('keydown', (e) => this.keyPress(e));\n    document.addEventListener('keyup', (e) => this.keyUp(e));\n  }\n  keyUp(e){\n    e.preventDefault();\n    switch(e.key){\n        case 'Shift':\n          this.setState({mod:Object.assign(\n            this.state.mod, \n            {shift:false}\n          )});\n        break;\n        case 'Control':\n          this.setState({mod:Object.assign(\n            this.state.mod, \n            {ctrl:false}\n          )});\n        break;\n        case 'Alt':\n          this.setState({mod:Object.assign(\n            this.state.mod, \n            {alt:false}\n          )});\n        break;\n        case ' ':\n          if(this.state.mod.space){\n            this.setState({mod:Object.assign(\n              this.state.mod, \n              {space:false}\n            )});\n          }\n        break;\n    }\n  }\n  keyPress(e){\n    e.preventDefault();\n    switch(e.key){\n        case 'Shift':\n          this.setState({mod:Object.assign(\n            this.state.mod, \n            {shift:true}\n          )});\n        break;\n        case 'Control':\n          this.setState({mod:Object.assign(\n            this.state.mod, \n            {ctrl:true}\n          )});\n        break;\n        case 'Alt':\n          this.setState({mod:Object.assign(\n            this.state.mod, \n            {alt:true}\n          )});\n        break;\n        case ' ':\n          if(!this.state.mod.space){\n            this.setState({mod:Object.assign(\n              this.state.mod, \n              {space:true}\n            )});\n          }\n        break;\n    }\n\n\n    if(e.key == 'Escape'){\n      animated = true;\n      this.setState({view:'splitted', renderMode:'normal', isToolboxHidden:true});\n    }\n    if(e.key === 'z'){\n      this.setState({renderMode:'normal'});\n    }\n    if(e.key === 'x'){\n      this.setState({renderMode:'inverse'});\n    }\n    if(e.key === 'c'){\n      this.setState({renderMode:'raw'});\n    }\n    if(e.key === 'v'){\n      this.setState({renderMode:'outline'});\n    }\n    if(e.key === 'ArrowUp'){\n      let newScale = this.state.brushScale  + brushStep;\n      this.setState({brushScale: brushSizeEdge.max < newScale ? brushSizeEdge.max : newScale });\n    }\n    if(e.key === 'ArrowDown'){\n      let newScale = this.state.brushScale - brushStep;\n      this.setState({brushScale: brushSizeEdge.min > newScale ? brushSizeEdge.min : newScale});\n    }\n  }\n\n  getPositions = (count, screenSize, splittedPos) => {\n      if(!screenSize){\n        return {x:0, y:0, width:2, height:2}\n      }else{\n        const edge = screenSize.height*0.01;\n        let landscape = screenSize.width/size.width > screenSize.height/size.height ? true : false;\n        let heightRatio = screenSize.height/size.height;\n        let widthRatio = screenSize.width/size.width;\n        let bounds = {\n            x: landscape ? (screenSize.width-size.width*heightRatio)/2 : 0,\n            y: landscape ? 0 : (screenSize.height-size.height*widthRatio)/2,\n            width: landscape ? size.width*heightRatio : screenSize.width,\n            height: landscape ? screenSize.height : size.height*widthRatio,\n        }\n        switch(this.state.view){\n          case 'single':\n            if(this.state.active === count){\n              return bounds;\n            }\n          case 'splitted':\n            return {\n                x:edge+bounds.x+bounds.width*splittedPos[count].x, \n                y:edge+bounds.y+bounds.height*splittedPos[count].y,\n                width:bounds.width/2-2*edge,\n                height:bounds.height/2-2*edge,\n            };\n        }\n      }\n  }\n  \n  boxClicked = (count) => {\n    animated = true;\n    this.setState({\n      view: 'single',\n      active: count,\n      isToolboxHidden: false,\n    });\n    \n  }\n  closedShapeCallback = (count) => {\n    closedShapeCounter[count] = true;\n    this.setState({isToolboxHidden:false});\n  }\n  brushSelect = (key) => {\n    let data = null;\n    switch(key) {\n      case 'brush_0':\n        data = {fill: brush_0, mouse: mouse_0, count:0};\n        break;\n      case 'brush_1':\n        data = {fill: brush_1, mouse: mouse_1, count:1};\n        break;\n      case 'brush_2':\n        data = {fill: brush_2, mouse: mouse_2, count:2};\n        break;\n      case 'brush_3':\n        data = {fill: brush_3, mouse: mouse_3, count:3};\n        break;\n      case 'brush_4':\n        data = {fill: brush_4, mouse: mouse_4, count:4};\n        break;\n      case 'brush_5':\n        data = {fill: brush_5, mouse: mouse_5, count:5};\n        break;\n    }\n    if(data){\n      this.setState({brushData: data, actBrush:data.count});\n    }\n    console.log('brushSelect '+key);\n  }\n\n  funcSelect = (key) => {\n    switch(key) {\n      case 'polygon':\n        this.setState({tool:key, actToolNum:0});\n      break;\n      case 'bucket':\n        this.setState({tool:key, actToolNum:1});\n      break;\n      case 'brush':\n        this.setState({tool:key, actToolNum:2});\n      break;\n      case 'split':\n      animated = true;\n      this.setState({view:'splitted', renderMode:'normal', isToolboxHidden:true});\n      break;\n    }\n    console.log('funcSelect '+key);\n  }\n\n  render() {\n    const {\n      classes,\n      key,\n      profilesCombinationId,\n      screenSize,\n    } = this.props;\n    const {\n      view,\n      active,\n      renderMode,\n      brushScale,\n      brushData,\n      actBrush,\n      isToolboxHidden,\n      tool,\n      actToolNum,\n      mod,\n    } = this.state;\n    checkAnimated(screenSize);\n    let brushMap = [...brushToolboxMap];\n    // TODO: temporary solution\n    brushMap[0].callback = this.brushSelect.bind(this);\n    let newBrush = brushMap.map((curr) => \n      <Toolbox \n        map = { curr } \n        trigger = { actBrush }\n        hidden = { isToolboxHidden || tool !== 'brush' }\n        side = { curr.side }\n      />\n    );\n\n\n    let funcMap = [...funcToolboxMap];\n    // TODO: temporary solution\n    funcMap[0].callback = this.funcSelect.bind(this);\n    console.log('mouse hidden'+ (view == 'splitted' || tool !== 'brush'));\n    let newFunc = funcMap.map((curr) => \n      <Toolbox \n        map = { curr } \n        trigger = { actToolNum }\n        hidden = { isToolboxHidden }\n        side = { curr.side }\n      />\n    );\n\n    return (\n      // TODO here needs to uwrap profilesCombinationId to profiles\n      <div className = {classes.cameraContainer}>\n      { this.props.profilesCombinationId ? profiles.map((profile, i) => \n          <CameraBox \n              count = { i }\n              active = { active }\n              profile = { profile }\n              key = { 'box_'+i }\n              origin = {{width: profiles.width, height: profiles.height}}\n              actPos = {this.getPositions(i, screenSize, splittedPos)}\n              view = {view}\n              boxClicked = {this.boxClicked}\n              closedShapeCallback = {this.closedShapeCallback}\n              zIndex = {active === i ? 1 : 0}\n              animated = {animated}\n              renderMode = {renderMode}\n              brushScale = {brushScale}\n              brushData = {brushData}\n              hideMouse = {view == 'splitted' || tool !== 'brush'}\n              mod = { mod }\n              tool = { tool }\n          />\n      ) : <div></div> }\n\n        {[...newBrush]}\n        {[...newFunc]}\n        <TempInfo />\n        \n      </div>\n    );\n  }\n}\n\nCameraContainer.defaultProps = {\n};\n\nexport default withStyles({ ...styles })(CameraContainer);","import React, { Component } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport CameraContainer from './ui/CameraContainer';\n\nconst styles = {\n  root: { // force entire screen occupying\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    margin: 0,\n  },\n};\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      screenSize: null,\n    };\n  }\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.resizer.bind(this));\n    this.resizer();\n  }\n  componentWillUnmount(){\n    window.removeEventListener(\"resize\", this.resizer.bind(this));\n  }\n  resizer = () => {\n    window.requestAnimationFrame(this.resizeHelper.bind(this));\n  }\n  resizeHelper(){\n    this.setState({screenSize:{\n      width: window.innerWidth, // document.documentElement.clientWidth, \n      height: window.innerHeight, // document.documentElement.clientHeight,\n    }});\n  }\n\n  render() {\n    const {screenSize} = this.state;\n    return (\n      <div className=\"App\" style={{ position:'absolute', top:0, left:0, width:'100%', height:'100%'}}>\n        <CameraContainer \n          screenSize={screenSize}\n          key={`inspection-manager-screen-0`}\n          profilesCombinationId={\"profileCombinationIdToLoad\"}/>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/brush_0.50659df5.svg\";","module.exports = __webpack_public_path__ + \"static/media/test_left.404d5289.png\";","module.exports = __webpack_public_path__ + \"static/media/mouse_0.565288ed.svg\";","module.exports = __webpack_public_path__ + \"static/media/brush_1.f6d9273b.svg\";","module.exports = __webpack_public_path__ + \"static/media/brush_2.9829f4a6.svg\";","module.exports = __webpack_public_path__ + \"static/media/brush_3.5e6e9e51.svg\";","module.exports = __webpack_public_path__ + \"static/media/brush_4.5fd43708.svg\";","module.exports = __webpack_public_path__ + \"static/media/brush_5.30137959.svg\";","module.exports = __webpack_public_path__ + \"static/media/info_icon.61c5806a.svg\";","module.exports = __webpack_public_path__ + \"static/media/mouse_1.31fca215.svg\";","module.exports = __webpack_public_path__ + \"static/media/mouse_2.5320bb3f.svg\";","module.exports = __webpack_public_path__ + \"static/media/mouse_3.4f56423b.svg\";","module.exports = __webpack_public_path__ + \"static/media/mouse_4.54a093f4.svg\";","module.exports = __webpack_public_path__ + \"static/media/mouse_5.adf699a0.svg\";","module.exports = __webpack_public_path__ + \"static/media/tool_polygon.cc56ea72.svg\";","module.exports = __webpack_public_path__ + \"static/media/tool_bucket.50fc8080.svg\";","module.exports = __webpack_public_path__ + \"static/media/tool_brush.c95a3835.svg\";","module.exports = __webpack_public_path__ + \"static/media/view_split.1f356a75.svg\";","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";"],"sourceRoot":""}